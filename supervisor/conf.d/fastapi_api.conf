; ~/projects/deepseek_dispatcher-new/supervisor/conf.d/fastapi_api.conf
[program:fastapi_api]
command=uvicorn web.app:app --host 0.0.0.0 --port 8000
directory=/app
autostart=true
autorestart=true
; 将标准错误输出和标准输出重定向到我们统一的日志文件
; 这里的日志文件名称应与 web/app.py 中 get_logger("fastapi_app") 的名称一致
stderr_logfile=/app/logs/fastapi_app.log
stdout_logfile=/app/logs/fastapi_app.log
; 确保日志文件不会被 Supervisor 限制大小或滚动，让 Python Logger 负责
stderr_logfile_maxbytes=0
stdout_logfile_maxbytes=0
; FastAPI 的环境变量（如 API Key, REDIS_URL）将从 docker-compose.yml 或 Kubernetes 配置继承
environment=PYTHONPATH="/app"
